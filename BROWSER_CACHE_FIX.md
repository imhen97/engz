# 🔧 브라우저 캐시/쿠키 문제 해결 가이드

## 문제 증상
- 시크릿 모드에서는 로그인이 정상 작동
- 일반 모드에서는 오류 발생

## 원인
오래된 NextAuth 쿠키나 브라우저 캐시가 남아있어서 발생하는 문제입니다.

## 해결 방법

### 방법 1: 브라우저 캐시 및 쿠키 삭제 (가장 확실한 방법)

#### Chrome/Edge
1. `F12` 또는 `Ctrl+Shift+I` (Mac: `Cmd+Option+I`)로 개발자 도구 열기
2. **Application** 탭 클릭
3. 왼쪽 사이드바에서 **Cookies** → `https://www.eng-z.com` 선택
4. 모든 쿠키 선택 후 삭제
5. 왼쪽 사이드바에서 **Storage** → **Clear site data** 클릭
6. 페이지 새로고침 (`Ctrl+Shift+R` 또는 `Cmd+Shift+R`)

#### 또는 간단하게:
1. 주소창에 `chrome://settings/clearBrowserData` 입력
2. **쿠키 및 기타 사이트 데이터** 체크
3. **캐시된 이미지 및 파일** 체크
4. **데이터 삭제** 클릭

### 방법 2: 시크릿 모드 사용 (임시 해결책)
- 시크릿 모드에서는 캐시와 쿠키가 없어서 정상 작동합니다
- 하지만 일반 모드에서도 작동하도록 수정했습니다

### 방법 3: 코드 수정 (이미 적용됨)
- `lib/auth.ts`에 명시적인 쿠키 설정 추가
- `SignInForm.tsx`에 오래된 쿠키 자동 제거 로직 추가

## 확인 방법

1. 브라우저 캐시 삭제 후
2. `https://www.eng-z.com/signup` 접속
3. 로그인 버튼 클릭
4. 정상적으로 OAuth 페이지로 이동하는지 확인

## 추가 문제 해결

### 여전히 오류가 발생하는 경우

1. **브라우저 확장 프로그램 비활성화**
   - 특히 광고 차단기나 프라이버시 확장 프로그램
   - 시크릿 모드에서 테스트 (확장 프로그램이 비활성화됨)

2. **다른 브라우저에서 테스트**
   - Chrome, Firefox, Safari 등에서 테스트
   - 문제가 특정 브라우저에만 있다면 브라우저 설정 확인

3. **Vercel 배포 확인**
   - 최신 코드가 배포되었는지 확인
   - Vercel 대시보드 → Deployments → 최신 배포 상태 확인

## 기술적 세부사항

### 쿠키 설정
- `sameSite: "lax"` - CSRF 보호 및 크로스 사이트 요청 허용
- `secure: true` (프로덕션) - HTTPS에서만 전송
- `domain: ".eng-z.com"` - 서브도메인 간 쿠키 공유

### 자동 쿠키 클리어
`SignInForm` 컴포넌트가 마운트될 때 오래된 NextAuth 쿠키를 자동으로 제거합니다.

